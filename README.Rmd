---
title: "Tidy datasets"
author: "Jay Hesselberth"
date: "December 27, 2015"
output:
  md_document:
    variant: markdown_github
    toc: true
    toc_depth: 2
---

# Overview

Tidy up all of the R builtin datasets.

```{r library, message=FALSE, warning=FALSE}
library(tidyr)
library(dplyr)

knitr::opts_chunk$set(comment='#>')

format_strs <- function(strings, sep='.', ...) {
  strings %>%
    stringr::str_to_lower() %>%
    stringr::str_replace_all(' ', sep)
}

```

## ability

```{r ability.cov}
ability.cov_tidy <- ability.cov %>%
  as.data.frame() %>%
  select(-n.obs, -center) %>%
  mutate(test = rownames(.)) %>%
  gather(cov, value, -test) %>%
  tbl_df()

ability.cov_tidy 
```

## airmiles

```{r airmiles}
airmiles_tidy <- airmiles %>%
  as.data.frame() %>%
  setNames('airmiles') %>%
  mutate(year = time(airmiles)) %>%
  tbl_df()

airmiles_tidy
```

## AirPassengers

```{r AirPassengers}
# gawd time series are awful ...
# from http://stackoverflow.com/questions/5331901/transforming-a-ts-in-a-data-frame-and-back

dmn <- list(month.abb, unique(floor(time(AirPassengers))))
AirPassengers_df <- tbl_df(data.frame(matrix(AirPassengers, 12, dimnames = dmn)))

AirPassengers_tidy <- AirPassengers_df %>%
  mutate(month = rownames(.)) %>%
  gather(year, value, -month)

AirPassengers_tidy
```

## airquality

```{r airquality}


```

## austres

```{r austres}
# Figure out how to get the 'Qtr1' ... colnames


```

## attenu

```{r attenu}
# `attenu` already tidy

#attenu_tidy <- attenu %>%
#  mutate(obs = seq_len(n())) %>%
 # gather(varible, value, -obs) %>%
  #tbl_df
#attenu_tidy

```

## attitude

```{r attitude}
attitude_tidy <- attitude %>%
  mutate(dept = seq_len(n())) %>%
  gather(varible, value, -dept) %>%
  tbl_df
attitude_tidy
```

## beavers

```{r beavers}
# Combine the beaver1 and beaver2 datasets ...
beaver1_tidy <- beaver1 %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs) %>%
  mutate(beaver = '1')

beaver2_tidy <- beaver2 %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs) %>%
  mutate(beaver = '2')

beavers_tidy <- rbind_list(beaver1_tidy, beaver2_tidy)

beavers_tidy
```

## BOD

```{r BOD}
BOD_tidy <- BOD %>% tbl_df %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)

BOD_tidy
```

## cars

```{r cars}
cars_tidy <- cars %>% tbl_df %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)

cars_tidy
```

## ChickWeight

```{r ChickWeight, warning=FALSE}
ChickWeight_tidy <- ChickWeight %>%
  gather(key, value, -Chick, convert = TRUE) %>%
  tbl_df

ChickWeight_tidy
```

## chickwts

```{r chickwts}
# `chickwts` already tidy
```

## CO2

```{r CO2}
# `CO2` already tidy
```

## DNase

```{r DNase}
# `DNase` already tidy
```

## esoph

```{r esoph}
# `esoph` already tidy
```

## faithful

```{r faithful}
# `faithful` already tidy
```

## Formaldehyde

```{r Formaldehyde}
# `Formaldehyde` already tidy
```

## freeny

```{r freeny}
freeny_tidy <- freeny %>%
  tbl_df %>%
  mutate(year = seq(1962.25, 1971.75, by = 0.25)) %>%
  gather (key, value, -year)
freeny_tidy
```

## Indometh
```{r Indometh}
Indometh_tidy <- Indometh %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)
Indometh_tidy
```

### infert
```{r infert}
infert_tidy <- infert %>%
  mutate(subject = seq_len(n())) %>%
  gather(key, value, -subject)
infert_tidy
```

## InsectSprays
```{r InsectSprays}
# `InsectSprays` already tidy
```

## iris
```{r iris}
iris_tidy <- iris %>%
  mutate(plantnum = seq_len(n())) %>%
  gather(measurement, value, -plantnum)
iris_tidy
```

## LifeCycleSavings
```{r LifeCycleSavings}
# LifeCycleSavings is already tidy
```

## Loblolly
```{r Loblolly}
# Loblolly is already tidy
```

## longley
```{r longley}
# longley is already tidy, unless the duplicate column will cause an issue?
```

## morley
```{r morley}
# morley is already tidy
```

## mtcars
```{r mtcars}

```

## npk
```{r npk}
# npk is already tidy
```

## Orange
```{r Orange}
Orange_tidy <- Orange %>%
  gather(measurement, value, -Tree)
Orange_tidy
```

## OrchardSprays
```{r OrchardSrays}
```

## PlantGrowth
```{r PlantGrowth}
PlantGrowth_tidy <- PlantGrowth %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)
PlantGrowth_tidy
```

## pressure
```{r pressure}
pressure_tidy <- pressure %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)
pressure_tidy
```

## Puromycin
```{r Puromycin}
```

## quakes
```{r quakes}
```

## randu
```{r randu}
randu_tidy <- randu %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs) 
randu_tidy
```

## rock
```{r rock}
rock_tidy <- rock %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs) 
rock_tidy
```

## sleep
```{r sleep}
```

## stackloss
```{r stackloss}
stackloss_tidy <- stackloss %>%
  mutate(obs = seq_len(n())) %>%
  gather(key, value, -obs)
stackloss_tidy
```

## swiss
```{r swiss}
swiss_tidy <- swiss %>%
  mutate(region = rownames(.)) %>%
  gather(key, value, -region)
swiss_tidy
```

## Theoph
```{r Theoph}
```

## ToothGrowth
```{r ToothGrowth}
```

## trees
```{r trees}
trees_tidy <- trees %>%
  mutate(tree = seq_len(n())) %>%
  gather(key, value, -tree)
trees_tidy
```

## USArrests
```{r USArrests}
USArrests_tidy <- USArrests %>%
  mutate(state = rownames(.)) %>%
  gather(key, value, -state)
USArrests_tidy
```

## USJudgeRatings
```{r USJudgeRatings}
USJudgeRatings_tidy <- USJudgeRatings %>%
  mutate(judge= rownames(.)) %>%
  gather(key, value, -judge)
USJudgeRatings_tidy
```

## USPersonalExpenditure
```{r USPersonalExpenditure}
USPersonalExpenditure_tidy <- USPersonalExpenditure %>%
  as.data.frame() %>%
  mutate(group = rownames(.)) %>%
  gather(year, expense, -group)
USPersonalExpenditure_tidy
```

## VADeaths
```{r VADeaths}
VADeaths_tidy <- VADeaths %>%
  as.data.frame() %>%
  mutate(age = rownames(.)) %>%
  gather(demographic, deaths, -age)
VADeaths_tidy
```

## volcano
```{r volcano}
```

## warpbreaks
```{r warpbreaks}

```

## women
```{r women}
```

## WorldPhones

```{r WorldPhones}
WPs_tidy <- WorldPhones %>% 
  as.data.frame() %>%
  mutate(year = rownames(.)) %>%
  gather(continent, value, -year) 
WPs_tidy
```
